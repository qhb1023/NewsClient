## **《移动应用软件设计》**

# **课程设计报告**

课题名称 **：** 新闻客户端 \_

学生姓名 **：** 钱虹斌\_

学 号 **：** 1201010035 \_

专 业 **：** 信息与计算科学\_

班 级 **：** 信计202 **\_**

2022－2023学年第1学期

## **第** ## **1** ## **章**

##

## **需求分析**

**1.1**** 背景**

移动新闻客户端凭借其丰富的资讯资源、实时的信息推送和方便的社交互动被越来越多的用户认可。通过Android Studio软件尝试搭建出一个简易的新闻客户端，用户可以通过该客户端实时的查看新闻，并且有多个新闻板块可供用户选择。

**1.2**** 主要功能**

1.进入应用首先有账号登录，帐号信息保存在本地SQLite数据库中。

2.对每条新闻可以打开，进行阅读详细信息，包含丰富的图片和文字。

3.对多个内容板块实现通过导航菜单切换。

4.导航菜单板块用户可以自定义更换头像。

5.通过判断手机横竖屏实现不同的新闻浏览排版。

## **第**

## **2**

## **章系统设计**

**2.1 UI**** 界面设计**

该新闻客户端需要完成的功能模块主要有：

·登录界面：支持账号、密码登录注册，并且信息存储在SQLite数据库中。

·首页：新闻界面，开始加载进入会显示社会新闻一栏。

·侧边栏：有用户头像、信息以及各个板块新闻可供用户进行跳转。

·头像：可使用拍照或相册文件自动更换头像。

登录页主要使用了LinearLayout布局，由TextView、EditText等组成了登录界面，用户首先进行注册后才可以进行登录。首页使用DrawerLayout布局，侧边栏通过相对布局将头像、ListView进行摆放，新闻主页通过帧布局使其置于侧边栏之下，并且可以进行拉取。新闻主页判断手机是否为横向摆放模式，若横向则通过FrameLayout将手机分割成1:3的布局放置新闻列表和新闻详情页。

**2.2**  **设计步骤**

1.设计登录页界面样式，创建数据库并连接，完成相应的SQLite代码编写与java代码的调用。

2.设计编写主页界面、侧边栏样式、导航栏样式。

3.调用聚合数据API接口获取新闻数据并打包成Gson解析包。

4.Android studio中导入Gson解析包。

5.编写Gson解析代码并解析服务器中的json包，将数据传入View中显示。

6.进入主页判断手机横竖屏，显示不同的主页排版。

7.设计对应java代码的点击事件，完成点击不同的列表选项展示不同的新闻板块。

8.设置Dialog，当点击头像时，显示列表（拍照、从手机相册选择、取消）。

9.设计从手机相册中选择图片并更换头像，编写对应java类，注册Android相应权限。

10.设计拍照并更换头像，编写对应java类，注册Android相应权限。

**2.3**  **功能流程图**

![](RackMultipart20230108-1-544m6f_html_14f0bcfca6f51375.png)

1.
## **系统实现**

**3.1**  **帐号注册与登录功能的实现**

设计一个存放帐号数据的SQLite数据库列表如下表所示：

| **用户数据表** |
| --- |
| **名** | **类型** | **长度** |
| **Username** | **Varchar** | **20** |
| **Password** | **Varchar** | **40** |

代码如下图所示：

![](RackMultipart20230108-1-544m6f_html_cc3f14bdb4b8bd56.png)

帐号的注册：通过对数据库添加记录来实现帐号的注册。

帐号的登录：对已有的数据库记录进行判断，若存在则登录成功跳转到主页，否则拒绝登录。

**3.2**  **新闻内容获取功能的实现**

1.利用聚合数据的API接口获取新闻列表数据，如下表所示

| 新闻名 | 数据名 | 数据格式 | 来源 |
| --- | --- | --- | --- |
| 社会新闻 | shehui | Json | 聚合数据 |
| 国内新闻 | guonei | Json | 聚合数据 |
| 国际新闻 | guoji | Json | 聚合数据 |
| 娱乐新闻 | yule | Json | 聚合数据 |
| 体育新闻 | tiyu | Json | 聚合数据 |
| 科技新闻 | keji | Json | 聚合数据 |
| 军事新闻 | junshi | Json | 聚合数据 |
| 财经新闻 | caijing | Json | 聚合数据 |
| 时尚新闻 | shishang | Json | 聚合数据 |

2.APP读取服务器中的json包，解析后即可展示新闻。

![](RackMultipart20230108-1-544m6f_html_17b83fd61746c8d6.png)

3.调取接口代码如下所示：

![](RackMultipart20230108-1-544m6f_html_aaf096420b1e7c3f.png)

1.
## **总结**

**4.1**  **运行截图**

![](RackMultipart20230108-1-544m6f_html_a369121999e4e6a9.png) ![](RackMultipart20230108-1-544m6f_html_8e1d1f1a9850cad5.png) ![](RackMultipart20230108-1-544m6f_html_20e947451de9748b.png)

登录界面 竖版新闻列表 侧边栏

![](RackMultipart20230108-1-544m6f_html_bff217a23b18fff7.png) ![](RackMultipart20230108-1-544m6f_html_396971e4b90c0187.png)

新闻详情页 横版新闻列表和详情页

**4.2**  **实验结果与分析**

整个项目能够满足不同群体用户之间游览不同种类的新闻，第一次启动APP通过注册用户后，即可实现登录。主页面的布局通过手机横竖屏的判断而不同并显示新闻列表，在不选择侧边栏不同种类的新闻情况下，会显示默认新闻，选择不同板块后，通过调用API接口抓取的不同种类的新闻，将显示对应板块的新闻。侧边栏中除了有不同种类的新闻板块，最上面还有头像。头像可通过点击后，选择拍照或者文件选择来自动更换头像。

**4.3**  **小结与心得体会**

本次项目，我学会了如何在FrameLayout和LinearLayout框架下搭建一个安卓APP，如何将数据保存到SQLite数据库内，如何通过API接口获取json数据并处理等。在不断的学习努力下，终于将整个APP搭建完成，可以正常使用。

附录 源代码

https://github.com/qhb1023/NewsClient
